{% extends "index.html" %}

{% block navbar %}
<div class="navbar">
    <div class="logo">
        <a href="{{ url_for('users.home') }}">Our Logo</a>
    </div>
    <div class="nav-links">
        <a href="{{ url_for('users.home') }}">Home</a>
        <a href="{{ url_for('users.logout') }}">Log Out</a>
    </div>
</div>
{% endblock navbar %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/home.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='style/credit_card.css') }}">

<div class="credit-wrapper">

    <!-- SIDE MENU -->
    <div class="side-menu">
        <a class="side-btn active">My Profile</a>
        <a class="side-btn" href="{{ url_for('users.credit') }}">My Credit Card</a>
        <a class="side-btn" href="{{ url_for('users.change_password') }}">Change Password</a>
        <a class="side-btn" href="{{ url_for('users.order_history') }}">Order History</a>
        <a class="side-btn">My Cart</a>
    </div>

    <!-- MAIN CONTENT -->
    <div class="credit-container profile-container">

        <div class="profile-card" id="profileBox">
            <h1 class="credit-title">My Profile</h1>

            <!-- ================= VIEW MODE ================= -->
            <div class="profile-view">

                <div class="profile-row">
                    <span>Full Name</span>
                    <p>{{ current_user.f_name or "John" }} {{ current_user.l_name or "Doe" }}</p>
                </div>

                <div class="profile-row">
                    <span>Birth Date</span>
                    <p>{{ current_user.birth or "1998-03-24" }}</p>
                </div>

                <div class="profile-row">
                    <span>Gender</span>
                    <p>{{ current_user.gender or "Male" }}</p>
                </div>

                <div class="profile-row">
                    <span>Phone</span>
                    <p>{{ current_user.phone or "+886 912 345 678" }}</p>
                </div>

                <div class="profile-row">
                    <span>Address</span>
                    <p>{{ current_user.address or "Taipei, Taiwan" }}</p>
                </div>

            </div>

            <!-- ================= EDIT BUTTON (KANAN BAWAH) ================= -->
            <div class="profile-actions profile-actions-view">
                <button type="button" class="edit-btn" onclick="enterEdit()">Edit Profile</button>
            </div>

            <!-- ================= EDIT MODE ================= -->
            <form method="POST" class="profile-form">
                {{ form.hidden_tag() }}

                <div class="profile-form-row two-col">
                    <div class="form-group">
                        <label>First Name</label>
                        <input type="text" class="profile-input">
                    </div>
                
                    <div class="form-group">
                        <label>Last Name</label>
                        <input type="text" class="profile-input">
                    </div>
                </div>
                

                <div class="profile-form-row">
                    {{ form.birth.label }}
                    {{ form.birth(class="profile-input") }}
                </div>

                <div class="profile-form-row">
                    <label for="gender">Gender</label>
                    <select name="gender" id="gender" class="profile-input">
                        <option value="">Select gender</option>
                        <option value="Male" {% if current_user.gender == "Male" %}selected{% endif %}>
                            Male
                        </option>
                        <option value="Female" {% if current_user.gender == "Female" %}selected{% endif %}>
                            Female
                        </option>
                        <option value="Other" {% if current_user.gender == "Other" %}selected{% endif %}>
                            Other
                        </option>
                    </select>
                </div>
                

                <div class="profile-form-row">
                    {{ form.phone.label }}
                    {{ form.phone(class="profile-input") }}
                </div>

                <div class="profile-form-row">
                    {{ form.address.label }}
                    {{ form.address(class="profile-input") }}
                </div>

                <div class="profile-actions profile-actions-form">
                    <button type="button" class="cancel-btn" onclick="exitEdit()">
                        Cancel
                    </button>
                    <button type="button" class="btn-gold" onclick="exitEdit()">
                        Save
                    </button>                    
                </div>                
            </form>

        </div>
    </div>
</div>

<script>
function enterEdit() {
    document.getElementById("profileBox").classList.add("editing");
}

function exitEdit() {
    document.getElementById("profileBox").classList.remove("editing");
}
</script>
{% endblock %}
