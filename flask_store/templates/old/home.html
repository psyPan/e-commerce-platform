{% extends "/old/index.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/old/home.css') }}">

<style>
    /* The window that hides the overflow */
    .slider-viewport {
        position: relative;
        width: 100%;
        height: 350px; /* Adjust height as preferred */
        overflow: hidden;
        border-radius: 8px; /* Optional rounded corners */
        margin-bottom: 30px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* The long track holding the slides side-by-side */
    .slider-track {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 0.6s ease-in-out;
    }

    /* Common Slide Styles */
    .slide {
        min-width: 100%; /* Each slide takes full width */
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: white;
        text-decoration: none; /* Removes underline from links */
    }

    /* Slide 1: Discount (Red/Orange) */
    .slide-discount {
        background: linear-gradient(135deg, #ff9966, #ff5e62);
    }

    /* Slide 2: Stores (Blue/Purple) - Clickable */
    .slide-stores {
        background: linear-gradient(135deg, #667eea, #764ba2);
        cursor: pointer;
    }
    .slide-stores:hover {
        opacity: 0.95;
        color: white;
    }

    /* Text Styling */
    .slide h2 {
        font-size: 3rem;
        margin-bottom: 10px;
        font-weight: 700;
        text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .slide p {
        font-size: 1.2rem;
        opacity: 0.9;
    }

    /* Navigation Dots */
    .slider-dots {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 12px;
    }
    .dot {
        width: 12px;
        height: 12px;
        background-color: rgba(255, 255, 255, 0.4);
        border-radius: 50%;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .dot.active {
        background-color: #fff;
        transform: scale(1.2);
    }
</style>

<div class="home-wrapper">

    <div class="slider-viewport">
        <div class="slider-track" id="sliderTrack">
            
            <div class="slide slide-discount">
                <h2>BIG SALE!</h2>
                <p>Get up to 50% off on selected items.</p>
            </div>

            <a href="{{ url_for('stores.list_stores') }}" class="slide slide-stores">
                <h2>BROWSE STORES</h2>
                <p>Explore our wide variety of vendors and shops.</p>
                <button class="btn btn-light mt-3" style="border-radius: 20px;">View All Stores</button>
            </a>

        </div>

        <div class="slider-dots">
            <div class="dot active" onclick="goToSlide(0)"></div>
            <div class="dot" onclick="goToSlide(1)"></div>
        </div>
    </div>
    <div class="product-grid">
        {% for i in range(12) %}
        <div class="product">
            <div class="img-box" style="background:#ddd; height:150px;"></div> <div class="product-name">Product {{ i }}</div>
            <div class="product-price">$100.00</div>
        </div>
        {% endfor %}
    </div>

    <div class="pagination">
        <a class="pg-btn">«</a>
        <a class="pg-btn active">1</a>
        <a class="pg-btn">2</a>
        <a class="pg-btn">3</a>
        <span>...</span>
        <a class="pg-btn">5</a>
        <a class="pg-btn">»</a>
    </div>    
</div>

<script>
    const track = document.getElementById('sliderTrack');
    const dots = document.querySelectorAll('.dot');
    let currentSlide = 0;
    const totalSlides = 2; // Change this if you add more slides
    let slideInterval;

    // Function to update the position of the track
    function updateSlider() {
        const translateX = -(currentSlide * 100);
        track.style.transform = `translateX(${translateX}%)`;

        // Update dots visual
        dots.forEach((dot, index) => {
            if (index === currentSlide) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        });
    }

    // Go to next slide (loops back to 0)
    function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateSlider();
    }

    // Go to specific slide (when clicking dots)
    function goToSlide(index) {
        currentSlide = index;
        updateSlider();
        resetTimer(); // Reset timer so it doesn't jump immediately after you click
    }

    function resetTimer() {
        clearInterval(slideInterval);
        slideInterval = setInterval(nextSlide, 5000); // 5000ms = 5 seconds
    }

    // Start the timer on load
    resetTimer();
</script>

{% endblock content %}