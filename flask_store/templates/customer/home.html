{% extends "/common/base.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/customer/home.css') }}">
<div class="container-fluid">
    <div class="slider-viewport">
        <div class="slider-track" id="sliderTrack">
            
            <div class="slide slide-discount">
                <h2>BIG SALE!</h2>
                <p>Get up to 50% off on selected items.</p>
            </div>

            <a href="{{ url_for('stores.list_stores') }}" class="slide slide-stores">
                <h2>BROWSE STORES</h2>
                <p>Explore our wide variety of vendors and shops.</p>
                <button class="btn btn-light mt-3" style="border-radius: 20px;">View All Stores</button>
            </a>

        </div>

        <div class="slider-dots">
            <div class="dot active" onclick="goToSlide(0)"></div>
            <div class="dot" onclick="goToSlide(1)"></div>
        </div>
    </div>
    <!-- Store Sections -->
    <div class="stores-container">
        {% for store in stores %}
        <div class="store-section">
            <a href="{{ url_for('stores.view_store', store_id=store.id) }}" class="store-link">
                <h2 class="store-name">{{ store.name }}</h2>
            </a>
            
            <div class="display-box">
                <div class="products-scroll">
                    {% for product in store.products %}
                    <a href="{{ url_for('products.view_product', product_id=product.id) }}" class="product-card-link">
                        <div class="product-card">
                            <div class="product-image">
                                <img src="{{ url_for('static', filename='product_pics/' + (product.image if product.image else 'default.jpg')) }}" alt="{{ product.name }}">
                            </div>
                            <div class="product-info">
                                <div class="product-name">{{ product.name }}</div>
                                <div class="product-price">${{ "%.0f"|format(product.sell_price) }}</div>
                            </div>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="pagination">
        {% if pagination.has_prev %}
            <a href="{{ url_for('main.home', page=pagination.prev_num) }}" class="pg-btn">«</a>
        {% endif %}
        
        {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if page_num %}
                {% if page_num == pagination.page %}
                    <a class="pg-btn active">{{ page_num }}</a>
                {% else %}
                    <a href="{{ url_for('main.home', page=page_num) }}" class="pg-btn">{{ page_num }}</a>
                {% endif %}
            {% else %}
                <span>...</span>
            {% endif %}
        {% endfor %}
        
        {% if pagination.has_next %}
            <a href="{{ url_for('main.home', page=pagination.next_num) }}" class="pg-btn">»</a>
        {% endif %}
    </div>
<script src="{{ url_for('static', filename='script/home.js') }}"></script>
{% endblock content %}