{% extends "index.html" %}

{% block navbar %}
<div class="navbar">

    <div class="logo">
        <a href="{{ url_for('users.home') }}">Our Logo</a>
    </div>

    <div class="nav-links">
        <a href="{{ url_for('users.home') }}">Home</a>
        <a href="{{ url_for('users.logout') }}">Log Out</a>
    </div>

</div>
{% endblock navbar %}


{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/home.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='style/credit_card.css') }}">

<div class="credit-wrapper">

    <div class="side-menu">
        <a href="#" class="side-btn">My Profile</a>
        <a href="#" class="side-btn active">My Credit Card</a>
        <a href="#" class="side-btn">Change Password</a>
        <a href="#" class="side-btn">Order History</a>
        <a href="#" class="side-btn">My Cart</a>
    </div>

    <div class="credit-container">
        
        <div class="card-list" id="cardSection">

            <h1 class="credit-title">My Credit Card</h1>

            <!-- CARD -->
            <div class="card-item">
                <div class="card-left">
                    <div class="card-icon">ðŸ’³</div>
                    <div class="card-info">
                        <div class="bank-name">Island Bank, National Association</div>
                        <div class="card-number">**** **** **** 1233</div>
                    </div>
                </div>
        
                <div class="card-right">
                    <span class="card-type">Mastercard</span>
        
                    <!-- âŒ delete (edit-only) -->
                    <button class="delete-card-btn" onclick="openDeleteModal()">âœ•</button>

                </div>
            </div>
        
            <!-- ACTION BUTTONS -->
            <div class="card-actions">
        
                <!-- NORMAL MODE -->
                <button class="edit-btn" onclick="enterEditMode()">Edit</button>
        
                <!-- EDIT MODE -->
                <div class="edit-actions">
                    <button class="cancel-btn" onclick="exitEditMode()">Cancel</button>
                    <button class="add-card-btn" onclick="openPopup()">Add a Card</button>
                </div>

                <!-- DELETE CONFIRM MODAL -->
                <div id="deleteModal" class="popup">
                    <div class="popup-inner">

                        <h2 class="popup-title">Delete Card</h2>
                        <p style="color:#555; margin-bottom:25px;">
                            Are you sure you want to delete this credit card?
                        </p>

                        <div class="popup-buttons">
                            <button class="cancel-btn" onclick="closeDeleteModal()">Cancel</button>
                            <button class="add-btn" onclick="confirmDelete()">Delete</button>
                        </div>

                    </div>
                </div>

        
            </div>
        
        </div>
               
        
    </div>

</div>


<!-- POPUP -->
<div id="popup" class="popup">
    <div class="popup-inner">
        <h2 class="popup-title">New Card</h2>

        <input type="text" class="input-field" placeholder="Card Number">

        <div class="two-input">
            <input type="text" class="input-field" placeholder="MM/YY">
            <input type="text" class="input-field" placeholder="CVV">
        </div>

        <div class="popup-buttons">
            <button class="cancel-btn" onclick="closePopup()">Cancel</button>
            <button class="add-btn">Add</button>
        </div>
    </div>
</div>


<script>
function openPopup() {
    document.getElementById("popup").classList.add("active");
}
function closePopup() {
    document.getElementById("popup").classList.remove("active");
}
</script>

<script>
    function enterEditMode() {
      document.querySelector('.card-list').classList.add('edit-mode');
    }
    
    function exitEditMode() {
      document.querySelector('.card-list').classList.remove('edit-mode');
    }
    </script>
    
<script>
    function openDeleteModal() {
        document.getElementById("deleteModal").classList.add("active");
    }
    
    function closeDeleteModal() {
        document.getElementById("deleteModal").classList.remove("active");
    }
    
    function confirmDelete() {
        // sementara demo dulu
        alert("Card deleted (dummy)");
    
        closeDeleteModal();
    
        // nanti kalau mau:
        // - remove card from DOM
        // - atau kirim request ke Flask
    }
    </script>
        

{% endblock %}
